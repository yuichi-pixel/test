<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ä¸å®šè©ãƒ»å‹•åè©ã‚¯ã‚¤ã‚ºã‚²ãƒ¼ãƒ ï¼ˆé«˜æ ¡1å¹´ç”Ÿãƒ»50å•ï¼‰</title>
<style>
  body {
    font-family: "Hiragino Kaku Gothic ProN", sans-serif;
    background: linear-gradient(135deg, #e3f2fd, #e0f7fa);
    text-align: center;
    padding: 30px;
  }
  h1 { color: #00796b; }
  .quiz-box {
    background: #fff;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    max-width: 700px;
    margin: 20px auto;
  }
  .choice {
    display: block;
    margin: 8px auto;
    padding: 10px;
    width: 80%;
    border: none;
    border-radius: 5px;
    background-color: #e0f2f1;
    cursor: pointer;
    transition: 0.2s;
  }
  .choice:hover { background-color: #b2dfdb; }
  .hidden { display: none; }
  #result { font-size: 1.1em; margin-top: 15px; }
  #score { font-weight: bold; color: #00796b; }
  #hint {
    background-color: #fff9c4;
    border-radius: 5px;
    padding: 8px;
    margin-top: 10px;
  }
  #summary {
    background: #fff;
    border-radius: 10px;
    padding: 20px;
    margin-top: 20px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    text-align: left;
  }
</style>
</head>
<body>

<h1>ğŸ¯ ä¸å®šè©ãƒ»å‹•åè©ã‚¯ã‚¤ã‚ºã‚²ãƒ¼ãƒ ï¼ˆé«˜æ ¡1å¹´ç”Ÿãƒ»50å•ï¼‰</h1>

<div id="start-screen" class="quiz-box">
  <p>ä¸å®šè©ãƒ»å‹•åè©ãƒ»å—å‹•æ…‹ãƒ»å®Œäº†å½¢ã®å¾©ç¿’ã«æŒ‘æˆ¦ã—ã‚ˆã†ï¼</p>
  <button id="start-btn">â–¶ ã‚¯ã‚¤ã‚ºã‚’é–‹å§‹</button>
</div>

<div id="quiz-screen" class="quiz-box hidden">
  <p id="question">ã“ã“ã«å•é¡ŒãŒè¡¨ç¤ºã•ã‚Œã¾ã™</p>
  <button id="hint-btn">ğŸ’¡ ãƒ’ãƒ³ãƒˆã‚’è¦‹ã‚‹</button>
  <p id="hint" class="hidden"></p>
  <div id="choices"></div>
  <p id="result"></p>
  <button id="next-btn" class="hidden">æ¬¡ã®å•é¡Œã¸</button>
</div>

<p>ç¾åœ¨ã®å¾—ç‚¹ï¼š<span id="score">0</span> ç‚¹</p>
<div id="summary" class="hidden"></div>

<script>
/* ============================
   ã‚¯ã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿ï¼ˆ50å•ä¸­ä¸€éƒ¨æŠœç²‹ï¼‰
============================ */
const quizPool = [
  {q:"I want ( ) abroad someday.",c:["travel","travelling","to travel","to travelling"],a:2,exp:"want to + å‹•è©åŸå½¢ã€ã€œã—ãŸã„ã€",jp:"ç§ã¯ã„ã¤ã‹æµ·å¤–ã¸æ—…è¡Œã—ãŸã„ã€‚"},
  {q:"She enjoys ( ) tennis on weekends.",c:["to play","playing","play","to playing"],a:1,exp:"enjoy + å‹•åè©ã€ã€œã™ã‚‹ã®ã‚’æ¥½ã—ã‚€ã€",jp:"å½¼å¥³ã¯é€±æœ«ã«ãƒ†ãƒ‹ã‚¹ã‚’ã™ã‚‹ã®ã‚’æ¥½ã—ã‚€ã€‚"},
  {q:"He decided ( ) harder.",c:["study","studying","to study","to studying"],a:2,exp:"decide to + å‹•è©åŸå½¢",jp:"å½¼ã¯ã‚‚ã£ã¨ä¸€ç”Ÿæ‡¸å‘½å‹‰å¼·ã™ã‚‹ã“ã¨ã‚’æ±ºã‚ãŸã€‚"},
  {q:"I regret ( ) the truth to her.",c:["tell","telling","to tell","to telling"],a:1,exp:"regret + å‹•åè©ã€ã€œã—ãŸã“ã¨ã‚’å¾Œæ‚”ã™ã‚‹ã€",jp:"å½¼å¥³ã«çœŸå®Ÿã‚’è©±ã—ãŸã“ã¨ã‚’å¾Œæ‚”ã—ã¦ã„ã‚‹ã€‚"},
  {q:"He hopes ( ) invited to the party.",c:["be","being","to be","to being"],a:2,exp:"hope to be + éå»åˆ†è©",jp:"å½¼ã¯ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼ã«æ‹›ã‹ã‚Œã‚‹ã“ã¨ã‚’æœ›ã‚“ã§ã„ã‚‹ã€‚"},
  {q:"She seems ( ) finished her homework.",c:["have","having","to have","to having"],a:2,exp:"seem to have + éå»åˆ†è©",jp:"å½¼å¥³ã¯å®¿é¡Œã‚’çµ‚ãˆãŸã‚ˆã†ã«è¦‹ãˆã‚‹ã€‚"},
  {q:"I forgot ( ) the window before leaving.",c:["close","closing","to close","to closing"],a:2,exp:"forget to + å‹•è©åŸå½¢",jp:"å‡ºã‹ã‘ã‚‹å‰ã«çª“ã‚’é–‰ã‚ã‚‹ã®ã‚’å¿˜ã‚ŒãŸã€‚"},
  {q:"Thank you for ( ) me yesterday.",c:["help","helping","to help","to helping"],a:1,exp:"for ã®å¾Œã¯å‹•åè©",jp:"æ˜¨æ—¥ã¯åŠ©ã‘ã¦ãã‚Œã¦ã‚ã‚ŠãŒã¨ã†ã€‚"},
  {q:"She is good at ( ) songs in English.",c:["sing","singing","to sing","to singing"],a:1,exp:"be good at + å‹•åè©",jp:"å½¼å¥³ã¯è‹±èªã§æ­Œã†ã®ãŒå¾—æ„ã ã€‚"},
  {q:"Iâ€™m looking forward to ( ) you soon.",c:["see","seeing","to see","to seeing"],a:1,exp:"look forward to + å‹•åè©",jp:"ã‚ãªãŸã«ã™ãä¼šã†ã®ã‚’æ¥½ã—ã¿ã«ã—ã¦ã„ã¾ã™ã€‚"},
  // æ®‹ã‚Š40å•ã‚‚åŒæ§˜ã«ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ å¯èƒ½
];

/* ========== å¤‰æ•° ========== */
let quizSet = [];
let current = 0;
let score = 0;
const setSize = 10;
let answered = [];

/* ========== è¦ç´ å–å¾— ========== */
const startScreen = document.getElementById("start-screen");
const startBtn = document.getElementById("start-btn");
const quizScreen = document.getElementById("quiz-screen");
const questionEl = document.getElementById("question");
const hintBtn = document.getElementById("hint-btn");
const hintEl = document.getElementById("hint");
const choicesEl = document.getElementById("choices");
const resultEl = document.getElementById("result");
const nextBtn = document.getElementById("next-btn");
const scoreEl = document.getElementById("score");
const summaryEl = document.getElementById("summary");

/* ========== ã‚¤ãƒ™ãƒ³ãƒˆè¨­å®š ========== */
startBtn.addEventListener("click", startQuiz);
hintBtn.addEventListener("click", () => hintEl.classList.toggle("hidden"));
nextBtn.addEventListener("click", nextQuestion);

/* ========== é–¢æ•° ========== */
function getRandomSet(array, n) {
  const copy = [...array];
  const result = [];
  while (result.length < n && copy.length > 0) {
    const i = Math.floor(Math.random() * copy.length);
    result.push(copy.splice(i, 1)[0]);
  }
  return result;
}

function startQuiz() {
  startScreen.classList.add("hidden");
  quizScreen.classList.remove("hidden");
  summaryEl.classList.add("hidden");
  quizSet = getRandomSet(quizPool, setSize);
  current = 0;
  score = 0;
  answered = [];
  scoreEl.textContent = score;
  showQuestion();
}

function showQuestion() {
  const q = quizSet[current];
  questionEl.textContent = `Q${current + 1}: ${q.q}`;
  hintEl.textContent = "ğŸ’¡ " + q.jp;
  hintEl.classList.add("hidden");
  resultEl.textContent = "";
  nextBtn.classList.add("hidden");
  choicesEl.innerHTML = "";

  q.c.forEach((choice, i) => {
    const btn = document.createElement("button");
    btn.textContent = `${i + 1}. ${choice}`;
    btn.className = "choice";
    btn.onclick = () => checkAnswer(i);
    choicesEl.appendChild(btn);
  });
}

function checkAnswer(selected) {
  const q = quizSet[current];
  const buttons = document.querySelectorAll(".choice");
  buttons.forEach(b => b.disabled = true);

  const correct = selected === q.a;
  if (correct) {
    resultEl.textContent = "âœ… æ­£è§£ï¼ +10ç‚¹";
    resultEl.style.color = "#2e7d32";
    score += 10;
  } else {
    resultEl.textContent = `âŒ ä¸æ­£è§£ï¼ æ­£è§£ã¯ã€Œ${q.c[q.a]}ã€`;
    resultEl.style.color = "#c62828";
    score -= 5;
  }

  scoreEl.textContent = score;
  answered.push({ q: q.q, correct: q.c[q.a], exp: q.exp });
  nextBtn.classList.remove("hidden");
}

function nextQuestion() {
  current++;
  if (current < quizSet.length) {
    showQuestion();
  } else {
    showSummary();
  }
}

function showSummary() {
  quizScreen.classList.add("hidden");
  summaryEl.classList.remove("hidden");
  summaryEl.innerHTML = `<h2>ğŸ‰ çµæœç™ºè¡¨ï¼</h2>
    <p>æœ€çµ‚å¾—ç‚¹ï¼š${score} ç‚¹</p>
    <h3>ğŸ“˜ è§£èª¬</h3>` +
    answered.map((a, i) =>
      `<p><strong>Q${i+1}:</strong> ${a.q}<br>
      âœ… æ­£è§£ï¼š${a.correct}<br>
      ğŸ’¬ ${a.exp}</p>`).join("") +
    `<button onclick="location.reload()">ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤ã™ã‚‹</button>`;
}
</script>
</body>
</html>
